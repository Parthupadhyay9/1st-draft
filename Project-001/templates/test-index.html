<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet"
        id="bootstrap-css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <title>IP Manager</title>




    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css" />
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>


    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">

    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
        .searchInput {
            display: flex;
            align-items: center;
            position: relative;
            justify-content: flex-end;
            margin: 10px 0px;
            padding: 0px 4px;
        }

        .searchInput input {
            border: 1px solid #e5e5e5;
            border-radius: 50px;
            margin-left: 8px;
            height: 34px;
            width: 100%;
            padding: 0px 25px 0px 10px;
            transition: all 0.6s ease;
        }

        .searchInput label {
            color: #767676;
            font-weight: normal;
        }

        .bg-mynav {
            background-color: #2c3e50;
        }

        body {
            font-size: 1.25rem;
            background-color: #f6f8fa;
        }

        td {
            line-height: 3rem;
        }
    </style>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
</head>

<body>

    <nav class="navbar navbar-dark bg-mynav">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <h4>IP Manager</h4>
            </a>
            <div class="col justify-content-end form-inline">
                <h5 class=' navbar-brand'>Hey, {{session.name}}!</h5> <a href="{{ url_for('logout') }}"> <input
                        type="submit" method="post" class=" mr-1 btn btn-primary form-inline flex text-center"
                        value="Logout"></input></a>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="d-flex bd-highlight mb-3">
            <div class="me-auto p-2 bd-highlight">
                <h2>Dashboard
            </div>
            <div class="col-sm-8 add_flex">
                <div class="form-group searchInput">
                    <input type="search" id="gfg" class="form-control" placeholder="Search" />
                    <script>
                        $(document).ready(function () {
                            $("#gfg").on("keyup", function () {
                                var value = $(this).val().toLowerCase();
                                $("#mytable tr").filter(function () {
                                    $(this).toggle($(this).text()
                                        .toLowerCase().indexOf(value) > -1)
                                });
                            });
                        });
                    </script>
                </div>
            </div>
            <div class="p-2 bd-highlight">
                <form class="form-inline text-secondary" action="/add">
                    <input href="/add" type="submit" method="post" class="btn btn-secondary" value="Create"></input>
                </form>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th class='ids'>Region</th>
                        <th class='location'>Branch</th>
                        <th class='location'>Device</th>
                        <th class='location'>Device Model/type</th>
                        <th>Wan</th>
                        <th>Lan</th>
                        <th class='add'>Additional</th>
                        <th class='action'>Action</th>
                    </tr>
                </thead>
                {% for row in branch %}

                <tbody id="mytable">
                    <tr >
                        <td >{{row.1}}</td>
                        <td>{{row.2}}</td>
                        <td>{{row.3}}</td>
                        <td>{{row.5}}/{{row.4}}</td>
                        <td>{{row.6}}</td>
                        <td>{{row.14}}</td>
                        <td>{{row.18}}</td>
                        <td style="display:none;">{{row.5}}</td>
                        <td style="display:none;">{{row.4}}</td>
                        <td style="display:none;">{{row.7}}</td>
                        <td style="display:none;">{{row.8}}</td>
                        <td style="display:none;">{{row.9}}</td>
                        <td style="display:none;">{{row.10}}</td>
                        <td style="display:none;">{{row.11}}</td>
                        <td style="display:none;">{{row.12}}</td>
                        <td style="display:none;">{{row.13}}</td>
                        <td style="display:none;">{{row.14}}</td>
                        <td style="display:none;">{{row.15}}</td>
                        <td style="display:none;">{{row.16}}</td>
                        <td style="display:none;">{{row.17}}</td>
                        <td style="display:none;">{{row.18}}</td>
                        <td style="display:none;">{{row.19}}</td>
                        <td style="display:none;">{{row.20}}</td>
                        <td style="display:none;">{{row.21}}</td>
                        <td style="display:none;">{{row.22}}</td>

                        <td>


                            <a href="/update/{{row.0}}" class="btn  btn-sm btn-secondary" data-toggle="modal"
                                data-target="#modalview{{row.0}}">View</a>
                            <a href="/edit/{{row.0}}" class="btn btn-warning btn-sm" data-toggle="modal"
                                data-target="#modaledit{{row.0}}">Edit</a>
                           
                            <a href="/delete/{{ row.0 }}" onclick="return confirm('Are Sure Want To Deleted ?')"
                                class="btn btn-danger btn-sm">Delete</a>
                        </td>


                    </tr>
 <!-- Edit Starts -->
 <div id="modaledit{{row.0}}" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title text-primary" style="align-content: center;">Edit
                    {{row.1}}
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>


            <div class="modal-body">

                <form action="{{ url_for('edit')}}" method="POST">
                    <input type="hidden" name="id" value="{{row.0}}">
                    <div class="form-group">
                        <h4>Device Details</h4>

                        <input value="{{row.1}}" type="text" name="region"
                            class="form-control" id="exampleFormControlInput1"
                            placeholder="Region">
                    </div>

                    <div class="form-group">
                        <input value="{{row.2}}" type="text" name="branch"
                            class="form-control" id="exampleFormControlInput1"
                            placeholder="branch">
                    </div>

                    <div class="form-group">
                        <select name="device" class="form-control" name="device" id="device" required>
                            <option value="{{row.3}}" hidden>{{row.3}}</option>
                  
                            <option value="switch">Switch</option>
                            <option value="firewall">Firewall</option>
                            <option value="router">Router</option>
                          </select>
                    </div>
                    <div class="form-group">
                        <input value="{{row.4}}" name="type" type="text"
                            class="form-control" id="exampleFormControlInput1"
                            placeholder="Type">
                    </div>

                    <script>
                        function toggleField(hideObj, showObj) {
                            hideObj.disabled = true;
                            hideObj.style.display = "none";
                            showObj.disabled = false;
                            showObj.style.display = "inline";
                            showObj.focus();
                        }
                    </script>
                    <select name="device-model" class="form-control" onchange="if(this.options[this.selectedIndex].id=='customOption'){
                            toggleField(this,this.nextSibling);
                            this.selectedIndex='0';
                        }" required>
                        <option value="{{row.5}}" hidden>{{row.5}}</option>
                        <option value="Cisco">Cisco</option>
                        <option value="Fortigate">Fortigate</option>
                        <option value="Aruba">Aruba</option>
                        <option id="customOption">Other</option>
                        <input class="form-control" class="form-control" name="device-model"
                            style="display: none" disabled="disabled"
                            onblur="if(this.value==''){toggleField(this,this.previousSibling);}" />
                    </select>
                    {%if row.22=="managed"%}
                    Managed<input type="checkbox" name="managed" value="managed" checked />
                    {%else%}
                    Managed<input type="checkbox" name="managed" value="managed" />

                    {%endif%}
                    <h4>Wan:</h4>
                    <input class="form-control" type="text" value={{row.6}} placeholder="IP"
                        name="wan1" required />
                    <input class="form-control" type="text" value={{row.8}}
                        placeholder="ISP Name" name="isp1" required />
                    <input class="form-control" type="text" value={{row.10}}
                        placeholder="Link Type" name="link1" required />
                    <input class="form-control" type="text" value={{row.12}}
                        placeholder="Circuit ID" name="circuit1" required />
                    <h4>Wan2:</h4>
                    <input class="form-control" type="text" value={{row.7}} placeholder="IP"
                        name="wan2" required />
                    <input class="form-control" type="text" value={{row.9}}
                        placeholder="ISP Name" name="isp2" required />
                    <input class="form-control" type="text" value={{row.11}}
                        placeholder="Link Type" name="link2" required />
                    <input class="form-control" type="text" value={{row.13}}
                        placeholder="Circuit ID" name="circuit2" required />
                    <h4>Additional Wan Links:</h4>

                    <select name="additional" class="form-control" id="dropdown" onchange="CheckAdditionals(this.value);" required>
                        <option value="{{row.18}}" hidden>{{row.18}}</option>
                        <option value="ILL">ILL</option>
                        <option value="BB">BB</option>
                        <option value="GSM">GSM</option>
                      </select>
                    <input class="form-control" type="text" value="{{row.19}}"
                        placeholder="ISP Name" name="isp3" required />
                    <input class="form-control" type="text" value="{{row.20}}"
                        placeholder="Links" name="link3" required />
                    <input class="form-control" type="text" value="{{row.21}}"
                        placeholder="Circuit ID" name="circuit3" required />
                    <h4>Lan:</h4>
                    {%if row.16 !="" and row.17!="" %}
                    <input class="form-control" type="text" value="{{row.14}}"
                        placeholder="IP" name="lan1" required />
                    <input class="form-control" type="text" value="{{row.15}}"
                        placeholder="Subnet" name="subnet1" required />
                    <input class="form-control" type="text" value="{{row.16}}" name="lan2"
                        id="ip" placeholder="IP" />
                    <input class="form-control" type="text" value="{{row.17}}"
                        name="subnet2" id="subnet" placeholder="Subnet" />
                    {%else%}
                    <input class="form-control" type="text" value="{{row.14}}"
                        placeholder="IP" name="lan1" required />
                    <input class="form-control" type="text" value="{{row.15}}"
                        placeholder="Subnet" name="subnet1" required />
                    <input class="form-control" type="text" value="{{row.16}}" name="lan2"
                        id="ip" placeholder="IP" style="visibility:hidden" />
                    <input class="form-control" type="text" value="{{row.17}}"
                        name="subnet2" id="subnet" placeholder="Subnet2"
                        style="visibility:hidden" />
                    {%endif%}
                    <button type="submit" class="btn btn-success mb-2">Update</button>

                </form>


            </div>
        </div>
    </div>
</div>
<!-- Edit Ends -->
                    <!-- View Starts -->

                    <div id="modalview{{row.0}}" class="modal fade" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title text-primary" style="align-content: center">
                                        View Details: {{row.1}}
                                    </h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>

                                <div class="modal-body">
                                    <form action="{{ url_for('update')}}" method="POST">
                                        <div class="form-group">

                                            <p>Branch: {{row.2}}</p>
                                            <p>Device : {{row.3}}</p>
                                            <p>Type: {{row.4}}</p>
                                            <p>Device Model: {{row.5}}</p>
                                            {%if row.22=="managed"%}
                                            Managed
                                            {%else%}
                                            Unmanaged
                                            {%endif%}
                                            <h4>Wan Details</h4>
                                            <p>Wan1: {{row.6}}</p>
                                            <p>Isp: {{row.8}}</p>
                                            <p>Link: {{row.10}}</p>
                                            <p>Circuit: {{row.12}}</p>
                                            <p>Wan2: {{row.7}}</p>
                                            <p>Isp: {{row.9}}</p>
                                            <p>Link: {{row.11}}</p>
                                            <p>Circuit: {{row.13}}</p>
                                            <h4>Additional Wan Details</h4>
                                            <p>Additional Wan: {{row.18}}</p>
                                            <p>Isp: {{row.19}}</p>
                                            <p>Link: {{row.20}}</p>
                                            <p>Circuit: {{row.21}}</p>
                                            <h4>Lan Details</h4>
                                            <p>Lan1: {{row.14}}</p>
                                            <p>Subnet1: {{row.15}}</p>
                                            {%if row.16=="" and row.17=="" %} {%else%}
                                            <p>Lan2: {{row.16}}</p>
                                            <p>Subnet2: {{row.17}}</p>
                                            {%endif%}
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- View Ends -->



                </tbody>
                {%endfor%}
            </table>
        </div>
    </div>

<style>
        .inp {
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
      }
</style>
</body>

</html>